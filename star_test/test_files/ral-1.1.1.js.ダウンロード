(function(window,undefined){/*
 ral v1.1.1
 Copyright (c) @2013-2018 Rakuten, Inc
 Date : 2018-02-20
*/
'use strict';window.RAL=window.RAL||{};
RAL.live||function(e,k){var l=e.JSON||{};"function"!==typeof l.stringify&&(l.stringify=function(a,b,c){function d(a,b){var c,g,n,l,q=f,m,h=b[a];h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(a));"function"===typeof p&&(h=p.call(b,a,h));switch(typeof h){case "string":return e(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);case "object":if(!h)return"null";f+=k;m=[];if("[object Array]"===Object.prototype.toString.apply(h)){l=h.length;
for(c=0;c<l;c+=1)m[c]=d(c,h)||"null";n=0===m.length?"[]":f?"[\n"+f+m.join(",\n"+f)+"\n"+q+"]":"["+m.join(",")+"]";f=q;return n}if(p&&"object"===typeof p)for(l=p.length,c=0;c<l;c+=1)"string"===typeof p[c]&&(g=p[c],(n=d(g,h))&&m.push(e(g)+(f?": ":":")+n));else for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&(n=d(g,h))&&m.push(e(g)+(f?": ":":")+n);n=0===m.length?"{}":f?"{\n"+f+m.join(",\n"+f)+"\n"+q+"}":"{"+m.join(",")+"}";f=q;return n}}function e(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}var f="",p,k="",g;if("number"===typeof c)for(g=0;g<c;g+=1)k+=" ";else"string"===typeof c&&(k=c);if((p=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});"function"!==typeof l.parse&&
(l.parse=function(a,b){function c(a,d){var e,l,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(l=c(g,e),l!==k?g[e]=l:delete g[e]);return b.call(a,d,g)}var d;d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));return/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?(d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d):null});RAL.a={p:"acc",Ba:"accu",Ca:"afid",Da:"altitude",Ea:"altaccu",Fa:"astime",da:"bln",Ga:"cc",Ha:"tis",Ia:"chkout",Ja:"chkpt",Ka:"cntln",La:"cycode",Q:"cp",B:"etype",$b:"fprint",Ma:"flv",Na:"genre",Oa:"gol",Pa:"tms",Qa:"head",ea:"ifr",Ra:"ni",fa:"jav",Sa:"lat",Ta:"ldtime",R:"loc",Ua:"long",ga:"navtype",ha:"online",Va:"pgid",
bc:"pgl",Wa:"pgn",Xa:"pgt",S:"ckp",cc:"price",Ya:"pdid",ia:"ref",URL:"url",Za:"reqc",$a:"rqtime",ja:"res",ka:"ltm",ab:"sq",q:"aid",L:"cks",bb:"speed",ma:"tzo",na:"ua",VERSION:"ver",cb:"sresv",la:"tid",ac:"itemvector"};RAL.kb="1.1.1";RAL.jb="OO1OO";RAL.eb=500;RAL.G="RAL";RAL.fb="ROFL";RAL.oa="RTID";RAL.dc="RFPR";RAL.U="cpkg_none=";RAL.T="?"+RAL.U;RAL.hb=256;RAL.ib=262144;RAL.gb=16;RAL.eventLog=[];RAL.ec=function(){};RAL.m=function(a){return"string"===typeof a||"[object String]"===Object.prototype.toString.call(a)};
RAL.i=function(a){return RAL.m(a)?a.replace(/^\s+|\s+$/g,""):null};RAL.t=function(a){return"[object Array]"===Object.prototype.toString.call(a)};RAL.u=function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)};RAL.Y=function(a,b){if(a&&"object"===typeof a&&b&&"object"===typeof b){for(var c in b)a[c]=b[c];return!0}return!1};RAL.l=function(a,b){var c=RAL.i(a);if(null===c)return null;b===k&&(b=document.cookie);var d=b?b.split(";"):"",e;for(e=0;e<d.length;e++){var f=d[e].indexOf("=");
if(0<f&&RAL.i(d[e].substr(0,f))===c)return d[e].substr(f+1)}return null};RAL.O=function(a,b,c){a=RAL.i(a);b=RAL.i(b);c=parseInt(c,10);if(null!==a&&null!==b&&!isNaN(c)){var d=new Date;0>=c?d.setTime(0):d.setDate(d.getDate()+c);document.cookie=a+"="+b+"; expires="+d.toGMTString()+";"+("https:"===location.protocol?" secure;":"")}};RAL.Pb=function(a){RAL.O(a,"",0)};RAL.Xb=function(){RAL.O("TEST","TEST",1);var a=RAL.l("TEST");RAL.O("TEST","",0);return"TEST"===a};RAL.M=function(a){if(!RAL.m(a))return"0000";
var b,c=[0,0,0,0];for(b=0;b<a.length;++b)c[b%4]+=a.charCodeAt(b);for(b=a=0;4>b;++b)a=(a<<4)+c[b]%16;a^=Math.floor(65536*Math.random());return("0000"+a.toString(16)).slice(-4)};RAL.g=function(a){this.c={};a!==k&&RAL.Y(this.c,a)};RAL.g.prototype.Lb=function(a){return null==a?!1:RAL.m(a)?""!==RAL.i(a):"number"===typeof a?!isNaN(a)&&isFinite(a):!0};RAL.g.prototype.d=function(a,b){var c=RAL.i(a);null!==c&&""!==c&&this.Lb(b)&&(this.c[c]="string"===typeof b?RAL.i(b):b)};RAL.g.prototype.remove=function(a){a=
RAL.i(a);null===a||""===a||a in this.c&&delete this.c[a]};RAL.g.prototype.setParameters=function(a){if(RAL.u(a))for(var b in a)this.d(b,a[b])};RAL.g.prototype.Aa=function(a){if(RAL.u(a))for(var b in a)if(this.e(b)){var c=this.get(b);RAL.t(c)&&RAL.t(a[b])?this.d(b,c.concat(a[b])):RAL.u(c)&&RAL.u(a[b])?RAL.Y(c,a[b]):this.d(b,a[b])}else this.d(b,a[b])};RAL.g.prototype.Zb=function(){return l.stringify(this.c)};RAL.g.prototype.get=function(a){a=RAL.i(a);return null===a||""===a?null:a in this.c?this.c[a]:
null};RAL.g.prototype.e=function(a){a=RAL.i(a);return null===a||""===a?!1:a in this.c};RAL.g.prototype.Yb=function(){var a={},b;for(b in this.c)a[b]=this.c[b];return a};RAL.K=function(){};RAL.K.prototype.A=function(){};RAL.K.prototype.o=function(){};RAL.K.prototype.I=function(){};RAL.K.prototype.e=function(){};RAL.J=function(){this.n=RAL.G};RAL.J.prototype.A=function(a,b){if(1E3<b.length)return!1;RAL.O(this.n+a,encodeURIComponent(String(b)),365);var c=RAL.l(this.n+a);return null!==c&&decodeURIComponent(c)===
b};RAL.J.prototype.o=function(a){a=RAL.l(this.n+a);return null==a?null:decodeURIComponent(a)};RAL.J.prototype.I=function(a){RAL.Pb(this.n+a)};RAL.J.prototype.e=function(a){return null!==this.o(a)};RAL.C=function(){this.n=RAL.G};RAL.C.prototype.A=function(a,b){try{return e.localStorage.setItem(this.n+a,b),!0}catch(c){}return!1};RAL.C.prototype.o=function(a){return e.localStorage.getItem(this.n+a)};RAL.C.prototype.I=function(a){e.localStorage.removeItem(this.n+a)};RAL.C.prototype.e=function(a){return null!==
this.o(a)};RAL.D=function(){};RAL.D.prototype.A=function(){return!0};RAL.D.prototype.o=function(){return null};RAL.D.prototype.I=function(){};RAL.D.prototype.e=function(){return!1};RAL.F=function(){this.s={}};RAL.F.prototype.A=function(a,b){this.s[a]=b;return!0};RAL.F.prototype.o=function(a){return a in this.s?this.s[a]:null};RAL.F.prototype.I=function(a){a in this.s&&delete this.s[a]};RAL.F.prototype.e=function(a){return a in this.s};RAL.b=function(a,b,c){this.xa=new Date;a=RAL.i(a);if(!a)throw"Missing URL!";
this.r=a;this.j=[a];this.ta=this.P=k;this.Ob="pv";this.ca="Rp";this.Z="Rz";this.X=navigator&&"onLine"in navigator?navigator.onLine:!0;this.c=new RAL.g;this.v=this.zb();this.f=null;this.ua=RAL.eb;this.w=b||RAL.fb;this.za=c||function(){return!0};this.k=[];this.V=(b=this.pa())?8<=b:!0;this.aa=0;e.addEventListener?(e.addEventListener("online",this.H(this.N,this,[this]),!1),e.addEventListener("offline",this.H(this.N,this,[this]),!1)):document.body&&(document.body.ononline=this.H(this.N,this,[this]),document.body.onoffline=
this.H(this.N,this,[this]))};RAL.b.prototype.pb=function(){return 2048-(this.r.length+RAL.T.length)};RAL.b.prototype.setMainReceiver=function(a){if(!(0<this.aa)&&RAL.m(a)){a=this.sa(a);this.j[0]=a;for(var b=this.j.length-1;0<b;--b)this.j[b]===a&&this.j.splice(b,1)}};RAL.b.prototype.addReceiver=function(a){if(!(0<this.aa)&&RAL.m(a)){a=this.sa(a);for(var b=0;b<this.j.length;++b)if(this.j[b]===a)return;this.j.push(a)}};RAL.b.prototype.sa=function(a){a=a.match(/^(?:https?:)?(?:\/\/)?(.*)$/);return("https:"==
document.location.protocol?"https://":"http://")+a[1]};RAL.b.prototype.H=function(a,b,c){return function(){var d=c||arguments,d=Array.prototype.slice.call(arguments[0]?arguments:[e.event],0),d=d.concat(c);return a.apply(b||e,d)}};RAL.b.prototype.ya=function(a){if(!this.za||!RAL.t(a)||0===a.length)return null;var b=[],c;for(c=0;c<a.length;c++){var d=a[c];this.za(l.parse(d))&&b.push(d)}return b};RAL.b.prototype.Eb=function(){try{return"localStorage"in e&&null!=e.localStorage}catch(a){return!1}};RAL.b.prototype.zb=
function(){return this.Eb()?new RAL.C:RAL.Xb()?new RAL.F:new RAL.D};RAL.b.prototype.qa=function(){if(e.XDomainRequest)return new XDomainRequest;if(e.XMLHttpRequest)return new XMLHttpRequest;if(e.ActiveXObject)try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){}return null};RAL.b.prototype.Gb=function(a){return"string"===typeof a&&null!==a&&/^[a-zA-Z]+$/.test(a)};RAL.b.prototype.Hb=function(a){return"string"===typeof a&&null!==a&&/^[0-9a-zA-Z]+$/.test(a)};RAL.b.prototype.ra=function(a){var b=
parseInt(a,10);return!isNaN(b)&&0<b&&b==a};RAL.b.prototype.h=function(a){return"object"===typeof a};RAL.b.prototype.setAccountId=function(a){this.ra(a)&&this.c.d(RAL.a.p,a)};RAL.b.prototype.setCharSet=function(a){this.h(a)||this.c.d(RAL.a.Ha,a)};RAL.b.prototype.vb=function(){return document.referrer!==k?document.referrer:""};RAL.b.prototype.Cb=function(){return document.location.href};RAL.b.prototype.setGoalId=function(a){this.h(a)||this.c.d(RAL.a.Oa,a)};RAL.b.prototype.setAffiliateId=function(a){this.h(a)||
this.c.d(RAL.a.Ca,a)};RAL.b.prototype.Jb=function(){if(!navigator.mimeTypes)return!1;var a,b=/^application\/x-java-applet;jpi-version=.*/;for(a=0;a<navigator.mimeTypes.length;a++)if(b.test(navigator.mimeTypes[a].type))return!0;return!1};RAL.b.prototype.setServiceId=function(a){this.ra(a)&&this.c.d(RAL.a.q,a)};RAL.b.prototype.setVersion=function(a){this.h(a)||this.c.d(RAL.a.VERSION,a)};RAL.b.prototype.setCurrencyCode=function(a){"string"===typeof a&&""!==a&&3<=a.length&&this.Gb(a)&&this.c.d(RAL.a.La,
a.substr(0,3))};RAL.b.prototype.setSearchQuery=function(a){this.h(a)||this.c.d(RAL.a.ab,a)};RAL.b.prototype.setContentLanguage=function(a){this.h(a)||this.c.d(RAL.a.Ka,a)};RAL.b.prototype.setCampaignCode=function(a){this.Hb(a)&&this.c.d(RAL.a.Ga,a)};RAL.b.prototype.setCheckPoints=function(a){isNaN(parseInt(a,10))||this.c.d(RAL.a.Ja,a)};RAL.b.prototype.setCheckout=function(a){a=parseInt(a,10);switch(a){case 10:case 20:case 30:case 40:case 50:this.c.d(RAL.a.Ia,a)}};RAL.b.prototype.setRequestResult=
function(a){this.h(a)||this.c.d(RAL.a.Za,a)};RAL.b.prototype.mb=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0":"")+b+"-"+(10>c?"0":"")+c+" "+(10>d?"0":"")+d+":"+(10>e?"0":"")+e+":"+(10>f?"0":"")+f};RAL.b.prototype.setPageName=function(a){this.h(a)||this.c.d(RAL.a.Wa,a)};RAL.b.prototype.setPageType=function(a){this.h(a)||this.c.d(RAL.a.Xa,a)};RAL.b.prototype.setGenre=function(a){this.h(a)||this.c.d(RAL.a.Na,a)};RAL.b.prototype.setProductId=
function(a){this.h(a)||this.c.d(RAL.a.Ya,a)};RAL.b.prototype.setCustomParameters=function(a){if(a){var b=a;if(this.c.e(RAL.a.Q)){var c=this.c.get(RAL.a.Q);RAL.Y(c,a)&&(b=c)}this.c.d(RAL.a.Q,b)}};RAL.b.prototype.setItemsCount=function(a){this.c.d(RAL.a.Ra,a)};RAL.b.prototype.setViewImpressions=function(a){this.c.d(RAL.a.cb,a)};RAL.b.prototype.setParameters=function(a){this.c.setParameters(a)};RAL.b.prototype.appendParameters=function(a){if(RAL.u(a))for(var b in a)if(this.c.e(b)){var c=this.c.get(b);
"object"!==typeof c&&(c=[]);this.c.d(b,[].concat(c).concat(a[b]))}else"object"===typeof a[b]?this.c.d(b,a[b]):this.c.d(b,[a[b]])};RAL.b.prototype.setOptions=function(a){if(RAL.t(a)){for(var b={},c=0,d=a.length;c<d;++c)b[a[c]]=!0;this.wa(b)}};RAL.b.prototype.Kb=function(){return e.navigator.userAgent!==k&&-1!==e.navigator.userAgent.search(/RAL/i)};RAL.b.prototype.detectFlashVersion=function(){if(document.images){var a=null,b=!1;if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]){var c=
navigator.mimeTypes["application/x-shockwave-flash"];c.enabledPlugin&&c.enabledPlugin.description&&(a=c.enabledPlugin.description,b=!0)}else navigator.plugins&&"Shockwave Flash"in navigator.plugins&&(a=navigator.plugins["Shockwave Flash"].description.match(/[\d]+/g).join("."),b=!0);try{b||(a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))}catch(d){}this.c.d(RAL.a.Ma,a)}};RAL.b.prototype.setCookieNames=function(a,b){RAL.u(a)?(RAL.a.L in a&&(this.ca=a[RAL.a.L]),RAL.a.S in
a&&(this.Z=a[RAL.a.S])):(b&&RAL.m(b)&&(this.ca=b),a&&RAL.m(a)&&(this.Z=a))};RAL.b.prototype.yb=function(){return RAL.l(this.ca)};RAL.b.prototype.ub=function(){return RAL.l(this.Z)};RAL.b.prototype.nb=function(){return navigator.browserLanguage?navigator.browserLanguage:navigator.language?navigator.language:RAL.jb};RAL.b.prototype.Bb=function(){return-(this.xa.getTimezoneOffset()/60)};RAL.b.prototype.Db=function(){return navigator.userAgent};RAL.b.prototype.xb=function(){return e.screen.width+"x"+
e.screen.height};RAL.b.prototype.pa=function(){if("Microsoft Internet Explorer"===navigator.appName){var a=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/);if(null!==a&&(a=parseFloat(a[1]),!isNaN(a)))return a}return k};RAL.b.prototype.Ab=function(){var a;this.P?a=this.P:e.sessionStorage&&(a=e.sessionStorage.getItem(RAL.G+RAL.oa));if(!a)if(a=Math.floor(65536*Math.random()),a=a.toString(16)+(17*a&65535).toString(16),e.sessionStorage)try{e.sessionStorage.setItem(RAL.G+RAL.oa,a)}catch(b){this.P=
a}else this.P=a;return a};RAL.b.prototype.sb=function(){var a=this.ta;a||(this.ta=a=RAL.M(document.location.href)+RAL.M(document.referrer)+RAL.M(navigator.userAgent)+RAL.M((new Date).getTime().toString()));return a};RAL.b.prototype.wb=function(a){return 0<a.navigationStart&&0<a.domLoading?a.domLoading-a.navigationStart:k};RAL.b.prototype.tb=function(a){return 0<a.domLoading&&0<a.domContentLoadedEventStart?a.domContentLoadedEventStart-a.domLoading:k};RAL.b.prototype.rb=function(a){return 0<a.domContentLoadedEventStart&&
0<a.domComplete?a.domComplete-a.domContentLoadedEventStart:k};RAL.b.prototype.ob=function(){if("performance"in e&&e.performance.timing){var a=e.performance.timing,b={};b[RAL.a.$a]=this.wb(a);b[RAL.a.Ta]=this.tb(a);b[RAL.a.Fa]=this.rb(a);return b}return k};RAL.b.prototype.qb=function(){return"performance"in e&&e.performance.navigation?e.performance.navigation.type:k};RAL.b.prototype.Ib=function(){return e===e.parent?0:1};RAL.b.prototype.setEvent=function(a){RAL.m(a)&&(this.c.d(RAL.a.B,a),a==this.Ob?
this.pageViewEvent():this.$())};RAL.b.prototype.pageViewEvent=function(){!this.Kb()&&(this.c.e(RAL.a.p)&&this.c.e(RAL.a.q)||this.Fb())&&(this.wa(),this.$())};RAL.b.prototype.wa=function(a){a&&!a[RAL.a.ka]||this.c.d(RAL.a.ka,this.mb(this.xa));a&&!a[RAL.a.URL]||this.c.d(RAL.a.URL,this.Cb());a&&!a[RAL.a.ia]||this.c.d(RAL.a.ia,this.vb());a&&!a[RAL.a.la]||this.c.d(RAL.a.la,this.Ab());a&&!a[RAL.a.ma]||this.c.d(RAL.a.ma,this.Bb());a&&!a[RAL.a.ja]||this.c.d(RAL.a.ja,this.xb());a&&!a[RAL.a.fa]||this.c.d(RAL.a.fa,
this.Jb());a&&!a[RAL.a.da]||this.c.d(RAL.a.da,this.nb());a&&!a[RAL.a.na]||this.c.d(RAL.a.na,this.Db());a&&!a[RAL.a.ha]||this.c.d(RAL.a.ha,this.X);a&&!a[RAL.a.VERSION]||this.c.d(RAL.a.VERSION,RAL.kb);if(!a||a[RAL.a.R])null===this.f?this.c.remove(RAL.a.R):this.c.d(RAL.a.R,this.f);a&&!a.perf||this.c.Aa(this.ob());a&&!a[RAL.a.ga]||this.c.d(RAL.a.ga,this.qb());a&&!a[RAL.a.ea]||this.c.d(RAL.a.ea,this.Ib())};RAL.b.prototype.Rb=function(a){if(!this.V)return this.ba([a])?!0:!1;try{var b=this.qa();b&&(b.open("GET",
this.r+RAL.T+encodeURIComponent(a),!0),b.withCredentials=!0,b.send(""))}catch(c){return!1}return!0};RAL.b.prototype.Sb=function(a){try{document.createElement("img").src=this.r+RAL.T+encodeURIComponent(a)+"&t="+(new Date).getTime()}catch(b){return!1}return!0};RAL.b.prototype.va=function(a){try{if(0===a.length)return!0;var b=1===a.length?a[0]:"["+a.join(",")+"]",c=this.qa();c&&(c.open("POST",this.r,!0),this.pa()||c.setRequestHeader("Content-type","text/plain; charset=UTF-8"),c.withCredentials=!0,c.send(RAL.U+
b))}catch(d){return!1}return!0};RAL.b.prototype.ba=function(a){if(!document.body)return!1;if(0===a.length)return!0;a=1===a.length?a[0]:"["+a.join(",")+"]";var b=document.createElement("iframe");b.name=RAL.G+String(Math.floor(2147483648*Math.random()));b.style.display="none";document.body.appendChild(b);if(b.contentWindow){b.contentWindow.name=b.name;var c=document.createElement("form");c.target=b.name;c.action=this.r.replace("http:","https:");c.method="POST";c.encoding=c.enctype="text/plain";c.style.display=
"none";var d=document.createElement("input");d.type="hidden";d.name=RAL.U.replace("=","");d.value=a;c.appendChild(d);document.body.appendChild(c);c.submit();document.body.removeChild(c);document.body.removeChild(b);return!0}return!1};RAL.b.prototype.Qb=function(a){if(null===a||"object"!==typeof a||0===a.length)return!0;var b=!0;return b=1===a.length?encodeURIComponent(a[0]).length<this.pb()?e.XDomainRequest?this.Sb(a[0]):this.Rb(a[0]):this.V&&!e.XDomainRequest?this.va(a):this.ba(a):this.V&&!e.XDomainRequest?
this.va(a):this.ba(a)};RAL.b.prototype.Wb=function(a,b){var c=null;if(a.e(RAL.a.p)&&a.e(RAL.a.q)){var d;d=/\bsplash\b/i.test(navigator.userAgent)?"splash_agent":this.yb();a.d(RAL.a.L,d);a.d(RAL.a.S,this.ub());this.Tb(a);/\bra_uid\b/.test(document.cookie)&&(d=RAL.l("ra_uid"))&&(d=decodeURIComponent(d),(c=d.match(/^"(.*)"$/))&&(d=c[1]),(d=RAL.l("rat_uid",d))&&a.d(RAL.a.L,d));c=a.Zb();d=this.W();d.length>=RAL.hb&&(d=this.ya(d)||d);c.length+d.join().length>RAL.ib&&this.ya(d);if(this.lb(c)&&(c=null,b))return}if(this.X){d=
this.W();c&&d.push(c);for(var c=Math.min(d.length,RAL.gb),c=d.splice(0,c),e=!1,f=0;f<this.j.length;++f)this.r=this.j[f],e=this.Qb(c)||e;if(e){this.aa++;for(e=0;e<c.length;++e)try{RAL.eventLog.push(l.parse(c[e]))}catch(k){}this.Ub(d)}}};RAL.b.prototype.Tb=function(a){var b=["Rg","Rt","BTA001"];if(RAL.t(b))for(var c,d,e=0;e<b.length;e++)c=b[e],d=RAL.l(c),null!==d&&a.d(c,decodeURIComponent(d))};RAL.b.prototype.N=function(a){a=a||e.event;this.X="online"===a.type};RAL.b.prototype.Fb=function(){return this.v.e(this.w)};
RAL.b.prototype.W=function(){return this.v.e(this.w)?this.v.o(this.w).split("\t"):[]};RAL.b.prototype.Ub=function(a){a&&a instanceof Array&&(0===a.length?this.v.I(this.w):this.v.A(this.w,a.join("\t")))};RAL.b.prototype.lb=function(a){var b=!1;a&&(b=this.W(),b.push(a),b=this.v.A(this.w,b.join("\t")));return b};RAL.b.prototype.Vb=function(a){this.f={};this.f[RAL.a.Sa]=a.coords.latitude;this.f[RAL.a.Ua]=a.coords.longitude;this.f[RAL.a.Ba]=a.coords.accuracy;a.coords.speed&&(this.f[RAL.a.bb]=a.coords.speed);
a.coords.altitude&&(this.f[RAL.a.Da]=a.coords.altitude);a.coords.heading&&(this.f[RAL.a.Qa]=a.coords.heading);a.coords.altitudeAccuracy&&(this.f[RAL.a.Ea]=a.coords.altitudeAccuracy);this.f[RAL.a.Pa]=a.timestamp};RAL.b.prototype.Nb=function(){};RAL.b.prototype.getLocation=function(){navigator.geolocation&&(this.f=null,navigator.geolocation.getCurrentPosition(this.H(this.Vb,this,[this]),this.Nb))};RAL.b.prototype.setReportingInterval=function(a){a=parseInt(a,10);!isNaN(a)&&0<a&&(this.ua=a)};RAL.b.prototype.$=
function(){this.c.e(RAL.a.p)&&this.c.e(RAL.a.q)&&(this.c.d(RAL.a.Va,this.sb()),this.k.push(this.c),this.c=new RAL.g)};RAL.b.prototype.Mb=function(){this.$();for(var a=0,b=1,c,d;b<this.k.length;)c=this.k[a],d=this.k[b],c.get(RAL.a.p)!=d.get(RAL.a.p)||c.get(RAL.a.q)!=d.get(RAL.a.q)||"scroll"!==c.get(RAL.a.B)&&"appear"!==c.get(RAL.a.B)||c.get(RAL.a.B)!==d.get(RAL.a.B)?(a++,b++):(c.Aa(d.Yb()),this.k.splice(b,1))};RAL.b.prototype.processQueue=function(){var a=this;if(RAL.t(RAL.callQueue))try{for(var b;0<
RAL.callQueue.length;){b=RAL.callQueue.shift();var c=b[0];c in this&&this[c].apply(this,b.slice(1))}for(this.Mb();0<this.k.length;){var d=1==this.k.length;this.Wb(this.k.shift(),!d)}}catch(k){}e.setTimeout(function(){a.processQueue()},this.ua)};var r="https:"==document.location.protocol?"https://":"http://";(new RAL.b(r+"rat.rakuten.co.jp/")).processQueue();RAL.live=!0}(window);})(window);
