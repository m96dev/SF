/*
 ranking-inshop-spa-2.0.3.js 2.0.3 Copyright (c)
 2017 Rakuten.Inc Date :
 2017-02-03 13:42:39
*/
(function(d){function r(c){j=c.attr("du");if(!i(j)||!/^[0-9]+$/.test(j))return!1;h=c.attr("shopid");if(!i(h)||!/^[0-9]+$/.test(h))return!1;n=q(c.attr("offset"),s);if(null===n)return!1;k=q(c.attr("len"),t);return null===k?!1:!0}function i(c){return"undefined"!==typeof c&&""!==c&&null!==c}function q(c,b){var a=c;i(c)||(a=b);/^[0-9]+$/.test(a)||(a=null);return a}function u(b,f){var a="",a=b.replace(/　/g,"  "),a=a.replace(/&#034;/g,'"'),a=a.replace(/&#039;/g,"'"),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,
">"),a=a.replace(/&amp;/g,"&");return a=d.RJS_Helpers.omitStr(a,f,v)}function w(b){var d="";return d=null===b||""===b?"-":(b+"").replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+"円"}function o(){d("#shopRankingSection").empty().remove()}if("function"===typeof d){var s="20",t="50",p,f,m=1,v="…",j="",h="",n="",k=50,b={settings:{sliderWidth:d(window).width(),slideImageBaseWidth:140,slideImageBaseHeight:140,slideBorderSize:1,slideMargin:2,slideCount:0,startindex:1,reviewflag:0},eobj:{proto:!1,timerId:!1,flickSliderWrapper:!1,
flickSlider:!1,slider:!1,slides:!1,sliderParentId:"#flick-slider-wrapperRanking",sliderScrollbar:!1,scrollIndicator:!1},itemPrototype:{html:"",height:0,width:0,identifiers:{itemurl:["",/\#ITEMURL\#/g,""],itemrank:["",/\#ITEMRANK\#/g,""],imageurl:['<img class="slider-image" src="',/\#ITEMIMGELE\#/g,'" >'],itemname:["",/\#ITEMNAME\#/g,""],itemprice:["",/\#ITEMPRICE\#/g,""],reviewave:["",/\#REVIEWAVE\#/g,""]}}};d(function(){var c=d("#rnkInShopConfig");r(c);var l={url:"https://shopapi.ranking.rakuten.co.jp/q?protocol=secure&qt=14&du="+
j+"&offset="+n+"&eid=13&sid="+h+"&len="+k,cache:!1,dataType:"jsonp",jsonpCallback:"jsonp"+h+"111111"+m,scriptCharset:"euc-jp",timeout:3E3,success:function(a){f=a;if(a=f.shopid==h)if(a=0<f.num){var a=f.updatedate,e=null==p?new Date:new Date(p),c=e.getFullYear()+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+("0"+e.getDate()).slice(-2);a==c?a=!0:10<=e.getHours()?a=!1:(e.setDate(e.getDate()-1),e=e.getFullYear()+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+("0"+e.getDate()).slice(-2),a=a==e)}if(a){a=f.displaydate.displayupdatedate+
"更新(集計日:"+f.displaydate.displayrankingstartdate+"-"+f.displaydate.displayrankingenddate+")";d("#inShopRankingDuration").text(a);a=f.items;e=[];if(i(a)){for(c=0;10>c;c++){var g=a[c];null===g||"undefined"==typeof g||e.push({itemname:u(g.name,k),itemurl:g.link,itemprice:w(g.displayprice),imageurl:g.image128url,itemrank:g.rank,reviewave:g.reviewave})}a=e}else a=void 0;b.items=a;b.eobj.proto=d("#flick-slider-protoRanking");b.eobj.flickSliderWrapper=d("#flick-slider-wrapperRanking");b.eobj.flickSlider=
d("#flick-sliderRanking");b.eobj.slider=d("#sliderRanking");b.settings.slideCount=a.length;b.itemPrototype.html=b.eobj.proto.html();if(""===b.itemPrototype.html)o();else{b.itemPrototype.height=b.eobj.proto.outerHeight();b.itemPrototype.width=b.eobj.proto.outerWidth();if(0===b.itemPrototype.width)b.itemPrototype.width=b.eobj.proto.css("width").replace("px","");b.eobj.flickSliderWrapper.flickSlide(b)}}else m++,2>=m?(l.jsonpCallback="jsonp"+h+"111111"+m,d.ajax(l)):o()},error:function(){o()}};d.ajax({url:"https://gettime.r10s.jp/",
cache:!1,dataType:"jsonp",scriptCharset:"euc-jp",timeout:3E3,success:function(a){a=a.epoch;i(a)&&/^[0-9]+$/.test(a)&&(p=1E3*parseInt(a));d.ajax(l)},error:function(){d.ajax(l)}})})}})(window.jQuery);
