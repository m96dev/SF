/*
 smt_shop_popup-1.0.3.js
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-08-05 16:44:15
*/
(function(){if("function"===typeof window.jQuery){var c=jQuery,d=c("html"),b=c("body"),f=function(a){this.$config=a;this.openButtonSelector=this.$config.attr("data-open-button")||this.defaults.selectors.openButton;this.popUpSelector=this.$config.attr("data-popup")||this.defaults.selectors.popUp;this.closeButtonSelector=this.$config.attr("data-close-button")||this.defaults.selectors.closeButton;this.$closeButton=this.$popUp=void 0;this.isPopUpInitialized=this.isPopUpVisible=!1};f.prototype={defaults:{selectors:{openButton:".openButton",
popUp:".popUp",closeButton:".closeButton"}},initialize:function(){var a=this;b.delegate(this.openButtonSelector,"click",function(e){e.preventDefault();a.isPopUpInitialized||a.initializePopUp();a.isPopUpVisible=!0;a.$popUp.show();d.css({height:"100%","overflow-y":"auto"});b.css({position:"relative",height:a.$popUp.height(),"overflow-y":"hidden"});a.$popUp.css({"min-height":window.innerHeight+50,"-webkit-transform":"translateY(100%)",transform:"translateY(100%)"});setTimeout(function(){a.$popUp.css({"-webkit-transition":"-webkit-transform 0.35s ease-in-out",
transition:"transform 0.35s ease-in-out","-webkit-transform":"translateY(0%)",transform:"translateY(0%)"})},100)})},initializePopUp:function(){var a=this;this.$popUp=c(this.popUpSelector);this.$closeButton=this.$popUp.find(this.closeButtonSelector);this.$popUp.css({"min-height":window.innerHeight+50});this.$closeButton.bind("click",function(e){a.isPopUpVisible=!1;e.preventDefault();a.$popUp.css({"-webkit-transform":"translateY(100%)",transform:"translateY(100%)"});setTimeout(function(){a.$popUp.hide();
d.removeAttr("style");b.removeAttr("style")},350)});c(window).bind("orientationchange resize",function(){a.$popUp.css({"min-height":window.innerHeight+50});a.isPopUpVisible&&b.css({position:"relative",height:a.$popUp.height(),"overflow-y":"hidden"})});this.isPopUpInitialized=!0}};var g=function(a){this.$config=a;this.openButtonSelector=this.$config.attr("data-open-button")||this.defaults.selectors.openButton;this.popUpBackgroundSelector=this.$config.attr("data-popup-background")||this.defaults.selectors.popUpBackground;
this.popUpSelector=this.$config.attr("data-popup")||this.defaults.selectors.popUp;this.closeButtonSelector=this.$config.attr("data-close-button")||this.defaults.selectors.closeButton;this.$closeButton=this.$popUp=this.$popUpBackground=this.$openButton=void 0};g.prototype={defaults:{selectors:{openButton:".openButton",popUpBackground:".popUpBackground",popUp:".popUp",closeButton:".closeButton"}},initialize:function(){this.$openButton=c(this.openButtonSelector);this.$popUpBackground=c(this.popUpBackgroundSelector);
this.$popUp=this.$popUpBackground.find(this.popUpSelector);this.$closeButton=this.$popUp.find(this.closeButtonSelector);this.$openButton.length&&this.$popUpBackground.length&&this.$popUp.length&&this.$closeButton.length&&this.bindEvents()},bindEvents:function(){var a=this;this.$openButton.bind("click",function(e){e.preventDefault();b.css({position:"relative"});a.$popUpBackground.show()});this.$popUpBackground.bind("click",function(){a.$popUpBackground.hide();b.removeAttr("style")});this.$closeButton.bind("click",
function(){a.$popUpBackground.hide();b.removeAttr("style")});this.$popUp.bind("click",function(a){a.stopPropagation()})}};var h=function(a){this.$config=a;this.scopeSelector=this.$config.attr("data-scope")||this.defaults.selectors.scope;this.inputTextSelector=this.$config.attr("data-input-text")||this.defaults.selectors.inputText;this.radioSelector=this.$config.attr("data-radio")||this.defaults.selectors.radio;this.submitButtonSelector=this.$config.attr("data-submit-button")||this.defaults.selectors.submitButton;
this.$radio=this.$inputText=this.$scope=void 0;this.l2id=""};h.prototype={defaults:{selectors:{scope:".placeholderChanger",inputText:"input[type=text]",radio:"input[type=radio]",submitButton:"input[type=submit]"}},initialize:function(){this.$scope=c(this.scopeSelector);this.$inputText=this.$scope.find(this.inputTextSelector);this.$radio=this.$scope.find(this.radioSelector);this.$submitButton=this.$scope.find(this.submitButtonSelector);this.l2id=this.$radio.filter(":checked").attr("data-l2-id");this.bindEvents()},
bindEvents:function(){var a=this;this.$radio.each(function(c){var b=a.$radio.eq(c),i=b.attr("data-placeholder");b.bind("click",function(){a.l2id=b.attr("data-l2-id");a.$inputText.attr("placeholder",i)})});this.$submitButton.bind("click",function(){a.l2id&&"function"==typeof s_setL2id&&s_setL2id(a.l2id)})}};c(function(){var a=c("#shopPopUpConfig").children();a.each(function(b){(new f(a.eq(b))).initialize()});var b=c("#searchPopUpConfig").children();b.each(function(a){(new g(b.eq(a))).initialize()});
var d=c("#placeholderChangerConfig").children();d.each(function(a){(new h(d.eq(a))).initialize()})})}})();
