!function(){var e={};e.nowSending=!1,e.addEvent=function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)},e.sendRAT=function(t){if("undefined"==typeof RAT||"function"!=typeof RAT.addCustomEvent)setTimeout(function(){e.sendRAT(t)},500);else if(e.nowSending)setTimeout(function(){e.sendRAT(t)},500);else{e.nowSending=!0;try{RAT.addCustomEvent({accountId:1,serviceId:2,pData:t,eventType:"video",options:["ua","url"]})}catch(a){return}setTimeout(function(){e.nowSending=!1},500)}},e.setVideoTracking=function(t){var a=t.detail.eventName,n=t.detail.movieName,i=t.detail.abTest,s="",d=0;switch(a){case"loadstart":if(s="exist",i){var r=i.slice(-1);"A"==r&&(d=1)}break;case"milestone":s="milestone";break;case"start":s="play";break;default:return}var o={name:n,event:s};"exist"==s&&(o.autoplay=d);var c={media:o};e.sendRAT(c)},e.setVideoTrackingIFrame=function(t){try{var a=JSON.parse(t.data)}catch(n){return}var i=a.eventName,s=a.movieName,d=a.abTest,r="",o=0;switch(i){case"loadstart":if(r="exist",d){var c=d.slice(-1);"A"==c&&(o=1)}break;case"milestone":r="milestone";break;case"start":r="play";break;default:return}var u={name:s,event:r,iframeurl:a.url};"exist"==r&&(u.autoplay=o);var v={media:u};e.sendRAT(v)},e.addEvent(document,"itemMovieEvent",e.setVideoTracking),e.addEvent(window,"message",e.setVideoTrackingIFrame)}();